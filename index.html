<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mana Cakes Kuppam üç∞</title>
<style>
  body { font-family: Poppins,sans-serif; background:#fff5f7; margin:0; }
  header { background:#ff7ea5; color:#fff; text-align:center; padding:15px; font-size:1.6em; font-weight:bold; }
  nav { text-align:center; background:#ffe0ec; padding:10px; }
  nav a { text-decoration:none; color:#ff4081; margin:0 10px; font-weight:bold; }
  #searchBar { margin:15px auto; display:block; width:90%; max-width:400px; padding:8px; border-radius:6px; border:1px solid #ccc; }
  #productList { display:grid; grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); gap:15px; padding:20px; }
  .card { background:white; border-radius:10px; box-shadow:0 2px 6px rgba(0,0,0,0.1); padding:10px; text-align:center; }
  .card img { width:100%; height:150px; object-fit:cover; border-radius:10px; }
  footer { background:#ff7ea5; color:white; text-align:center; padding:10px; margin-top:20px; }
</style>
</head>
<body>
  <header>Mana Cakes Kuppam</header>
  <nav>
    <a href="index.html">Home</a>
    <a href="#contact">Contact</a>
    <a href="#address">Address</a>
    <a href="admin.html">Owner Login</a>
  </nav>

  <input type="text" id="searchBar" placeholder="Search cakes by name..." />

  <section id="productList"></section>

  <footer>
    <p id="contact">üìû Contact: +91 98765 43210</p>
    <p id="address">üè† Address: Kuppam, Andhra Pradesh</p>
  </footer>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCG6vkAeA0efSZ0ANW7e4qcQkiSOe2583g",
      authDomain: "bakery-data-610dc.firebaseapp.com",
      projectId: "bakery-data-610dc",
      storageBucket: "bakery-data-610dc.appspot.com",
      messagingSenderId: "373918020823",
      appId: "1:373918020823:web:d0c1a902de7fa4f4252c92",
      measurementId: "G-H4JT872JGR"
    };
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const productList = document.getElementById('productList');
    const searchBar = document.getElementById('searchBar');
    let allProducts = [];

    async function loadProducts() {
      productList.innerHTML = "Loading...";
      const snap = await getDocs(collection(db, "products"));
      allProducts = [];
      snap.forEach(docSnap => {
        const d = docSnap.data();
        allProducts.push(d);
      });
      display(allProducts);
    }

    function display(list){
      productList.innerHTML = "";
      list.forEach(d=>{
        productList.innerHTML += `
          <div class="card">
            <img src="${d.photo || d.imageURL}" alt="${d.name}">
            <h3>${d.name}</h3>
            <p>‚Çπ${d.price}</p>
          </div>`;
      });
    }

    searchBar.addEventListener("input", e=>{
      const val = e.target.value.toLowerCase();
      const filtered = allProducts.filter(p => p.name.toLowerCase().includes(val));
      display(filtered);
    });

    loadProducts();
  </script>
</body>
</html>
